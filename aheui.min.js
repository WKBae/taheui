!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.aheui=i():t.aheui=i()}(this,(function(){return(()=>{"use strict";var t={d:(i,s)=>{for(var e in s)t.o(s,e)&&!t.o(i,e)&&Object.defineProperty(i,e,{enumerable:!0,get:s[e]})},o:(t,i)=>Object.prototype.hasOwnProperty.call(t,i),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},i={};t.r(i),t.d(i,{default:()=>y,Aheui:()=>d,cho:()=>e,jung:()=>n,jong:()=>h});var s=function(t,i,s,e){return new(s||(s=Promise))((function(n,h){function r(t){try{c(e.next(t))}catch(t){h(t)}}function o(t){try{c(e.throw(t))}catch(t){h(t)}}function c(t){var i;t.done?n(t.value):(i=t.value,i instanceof s?i:new s((function(t){t(i)}))).then(r,o)}c((e=e.apply(t,i||[])).next())}))};const e=["ㄱ","ㄲ","ㄴ","ㄷ","ㄸ","ㄹ","ㅁ","ㅂ","ㅃ","ㅅ","ㅆ","ㅇ","ㅈ","ㅉ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"],n=["ㅏ","ㅐ","ㅑ","ㅒ","ㅓ","ㅔ","ㅕ","ㅖ","ㅗ","ㅘ","ㅙ","ㅚ","ㅛ","ㅜ","ㅝ","ㅞ","ㅟ","ㅠ","ㅡ","ㅢ","ㅣ"],h=["","ㄱ","ㄲ","ㄳ","ㄴ","ㄵ","ㄶ","ㄷ","ㄹ","ㄺ","ㄻ","ㄼ","ㄽ","ㄾ","ㄿ","ㅀ","ㅁ","ㅂ","ㅄ","ㅅ","ㅆ","ㅇ","ㅈ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"],r=[0,2,4,4,2,5,5,3,5,7,9,9,7,9,9,8,4,4,6,2,4,1,3,4,3,4,4,3];class o{constructor(){this._items=[]}push(t){this._items.push(t)}pop(){return 0===this._items.length?null:this._items.pop()}append(t){this.push(t)}every(t){for(let i=0;i<this._items.length&&!1!==t(this._items[i],i);i++);}}class c{constructor(){this._head=null,this._tail=null}push(t){const i=[t,null];this._tail?(this._tail[1]=i,this._tail=i):this._tail=this._head=i}pop(){if(this._head){const t=this._head[0];return this._head=this._head[1],this._head||(this._tail=null),t}return null}append(t){this._head=[t,this._head]}every(t){for(let i=this._head,s=0;null!=i&&!1!==t(i[0],s);i=i[1],s++);}}function a(t){return function(i,s){const e=t.call(this,i,s);return 0===e?0:e||!0}}function u(t,i){"number"==typeof i&&t.push(i)}function l(t,i,s=u){return 1==t?function(t,e){const n=t.pop();return null!==n&&(s.call(this,t,i(n),e)||!0)}:2==t?function(t,e){const n=t.pop();if(null===n)return!1;const h=t.pop();return null===h?(t.append(n),!1):s.call(this,t,i(h,n),e)||!0}:function(e,n){const h=[];for(let i=t-1;i>=0;i--){const s=e.pop();if(null===s){for(i++;i<t;i++)e.append(h[i]);return!1}h[i]=s}return s.call(this,e,i.apply(null,h),n)||!0}}const p=()=>!0;class d{constructor(t){this.stacks=[],this.currentStack=0,this.stepCount=0,this.running=!1,this._runIndex=0,this.x=0,this.y=0,this.dx=0,this.dy=1,this.script=t,this._init();const i=this.script.split(/\r?\n/),s=[];i.forEach(((t,i)=>{s[i]=[];for(let n=0;n<t.length;n++)s[i][n]=("string"==typeof(e=t.charCodeAt(n))&&(e=e.charCodeAt(0)),e<44032||e>55203?null:[(e-=44032)/28/21|0,(e/28|0)%21,e%28]);var e})),this.plane=s,this._callbacks={},this._intIn=()=>-1,this._charIn=()=>-1}_init(){this.stacks=[];for(let t=0;t<h.length;t++)this.stacks[t]=21==t?new c:new o;this.currentStack=0,this.stepCount=0,this.running=!1,this._runIndex+=1,this.x=0,this.y=0,this.dx=0,this.dy=1}reset(){this._init(),this.emit("reset")}step(){var t;this.running||this.emit("start");const i=null===(t=this.plane[this.y])||void 0===t?void 0:t[this.x];if(i){this._updateDirection(i[1]);const t=d._operations[i[0]].call(this,this.stacks[this.currentStack],i[2]);if("object"==typeof t)return t.then((t=>{if(!1===t)this._updateDirection(19);else if(!0!==t){const i=t;return this.emit("end",i),i}this._followDirection(),this.stepCount++,this.emit("step"),this.running||this.emit("stop")}));if(!1===t)this._updateDirection(19);else if(!0!==t){const i=t;return this.emit("end",i),i}}this._followDirection(),this.stepCount++,this.emit("step"),this.running||this.emit("stop")}run(t=1e4){return s(this,void 0,void 0,(function*(){let i;if(this.running&&this.stop(),this.running=!0,this.emit("start"),0===t){const t=++this._runIndex;for(;;){const s=this.step();if("object"==typeof s){if(i=yield s,"number"==typeof i)break;if(this._runIndex!==t)return Promise.reject()}else if("number"==typeof s){i=s;break}}}else i=yield this._batch(t);return this.running=!1,this.emit("end",i),i}))}_batch(t){const i=++this._runIndex;return new Promise(((e,n)=>{const h=new MessageChannel;h.port1.onmessage=()=>s(this,void 0,void 0,(function*(){if(this._runIndex===i){for(let s=0;s<t;s++){const t=this.step();if("object"==typeof t){const s=yield t;if("number"==typeof s)return void e(s);if(this._runIndex!==i)return void n()}else if("number"==typeof t)return void e(t)}h.port2.postMessage(null)}else n()})),h.port2.postMessage(null)}))}stop(){this.running&&(this._runIndex+=1,this.running=!1,this.emit("stop"))}_updateDirection(t){switch(t){case 0:this.dx=1,this.dy=0;break;case 4:this.dx=-1,this.dy=0;break;case 13:this.dx=0,this.dy=1;break;case 8:this.dx=0,this.dy=-1;break;case 2:this.dx=2,this.dy=0;break;case 6:this.dx=-2,this.dy=0;break;case 17:this.dx=0,this.dy=2;break;case 12:this.dx=0,this.dy=-2;break;case 20:this.dx=-this.dx;break;case 18:this.dy=-this.dy;break;case 19:this.dx=-this.dx,this.dy=-this.dy}}_followDirection(){this.x+=this.dx,this.x<0?this.x=this.plane[this.y].length-1:this.x>=this.plane[this.y].length&&0!==this.dx&&(this.x=0),this.y+=this.dy,this.y<0?this.y=this.plane.length-1:this.y>=this.plane.length&&(this.y=0)}on(t,i){return this._callbacks[t]||(this._callbacks[t]=[]),this._callbacks[t].push(i),this}off(t,i){if(t)if(i){const s=this._callbacks[t];s&&(this._callbacks[t]=s.filter((t=>t!==i)))}else delete this._callbacks[t];else this._callbacks={};return this}emit(t,...i){let s=this._callbacks[t];if(s)for(let t=s.length-1;t>=0;t--)s[t].apply(this,i);return this}setIntegerInput(t){const i=this._intIn;return this._intIn=t,i}setCharacterInput(t){const i=this._charIn;return this._charIn=t,i}}var f;d._operations=[p,p,l(2,((t,i)=>t/i|0)),l(2,((t,i)=>t+i)),l(2,((t,i)=>t*i)),l(2,((t,i)=>t%i)),l(1,(t=>t),(function(t,i,s){if(21===s)this.emit("integer",i);else if(27===s){let t;i<=65535||i>1114111?t=String.fromCharCode(i):(i-=65536,t=String.fromCharCode(55296+(i>>10),i%1024+56320)),this.emit("character",t)}return!0})),(f=function(t,i){if(21===i){const i=this._intIn();if("object"==typeof i)return i.then((i=>{t.push(i)}));t.push(i)}else if(27===i){const i=this._charIn();if("object"==typeof i)return i.then((i=>{t.push("string"==typeof i?i.charCodeAt(0):i)}));t.push("string"==typeof i?i.charCodeAt(0):i)}else t.push(r[i])},function(t,i){const s=f.call(this,t,i);return"object"==typeof s?s.then((t=>t||!0)):s||!0}),l(1,(t=>t),((t,i)=>{t.append?(t.append(i),t.append(i)):(t.push(i),t.push(i))})),a((function(t,i){this.currentStack=i})),l(1,(t=>t),(function(t,i,s){this.stacks[s].push(i)})),p,l(2,((t,i)=>t>=i?1:0)),p,l(1,(t=>0!=t),(function(t,i){i||(this.dx=-this.dx,this.dy=-this.dy)})),p,l(2,((t,i)=>t-i)),l(2,((t,i)=>[i,t]),((t,[i,s])=>{t.append(i),t.append(s)})),a((function(t){return t.pop()||0}))];const y=d;return i})()}));
//# sourceMappingURL=aheui.min.js.map